<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜…è¯»è¾…åŠ©åŠŸèƒ½æµ‹è¯• - æ‚Ÿæµ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0f172a;
            --secondary-color: #1e293b;
            --accent-color: #3b82f6;
            --text-light: #e2e8f0;
            --text-muted: #94a3b8;
            --glass-bg: rgba(15, 23, 42, 0.8);
            --glass-border: rgba(59, 130, 246, 0.2);
            --font-serif: 'Noto Serif SC', serif;
        }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            min-height: 100vh;
            color: var(--text-light);
            font-family: var(--font-serif);
        }

        .markdown-content {
            font-family: var(--font-serif);
            line-height: 1.8;
            color: var(--text-light);
        }

        .markdown-content h1,
        .markdown-content h2,
        .markdown-content h3 {
            color: var(--accent-color);
            margin: 1.5em 0 0.5em 0;
            font-weight: 600;
        }

        .markdown-content h1 {
            font-size: 1.5em;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 0.3em;
        }

        .markdown-content h2 {
            font-size: 1.3em;
        }

        .markdown-content h3 {
            font-size: 1.1em;
        }

        .markdown-content p {
            margin: 1em 0;
            text-align: justify;
        }

        /* é˜…è¯»é«˜äº®æ ·å¼ */
        .reading-highlight {
            background: linear-gradient(120deg, rgba(59, 130, 246, 0.25) 0%, rgba(147, 197, 253, 0.15) 100%) !important;
            border-radius: 4px;
            padding: 2px 4px;
            margin: 0 1px;
            box-shadow: 0 0 8px rgba(59, 130, 246, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .reading-highlight::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            border-radius: 4px;
            animation: shimmer 1.5s ease-in-out;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .reading-controls {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 280px;
        }

        .reading-control-btn {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.4);
            color: var(--accent-color);
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .reading-control-btn:hover {
            background: rgba(59, 130, 246, 0.3);
            border-color: var(--accent-color);
        }

        .reading-control-btn.active {
            background: var(--accent-color);
            color: white;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .speed-slider {
            width: 80px;
            height: 4px;
            background: rgba(59, 130, 246, 0.3);
            border-radius: 2px;
            outline: none;
            cursor: pointer;
        }

        .speed-slider::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            background: var(--accent-color);
            border-radius: 50%;
            cursor: pointer;
        }

        .reading-focus-indicator {
            position: fixed;
            left: 10px;
            width: 4px;
            height: 60px;
            background: linear-gradient(180deg, var(--accent-color), rgba(59, 130, 246, 0.5));
            border-radius: 2px;
            z-index: 999;
            transition: all 0.3s ease;
            box-shadow: 0 0 12px rgba(59, 130, 246, 0.5);
            display: none;
        }

        .reading-status {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 12px 20px;
            color: var(--text-light);
            font-size: 14px;
            z-index: 999;
            display: none;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-6 py-8 max-w-4xl">
        <div class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-white mb-4">é˜…è¯»è¾…åŠ©åŠŸèƒ½æµ‹è¯•</h1>
            <p class="text-slate-300">ä¸“ä¸ºé˜…è¯»å›°éš¾ç—‡ç”¨æˆ·è®¾è®¡çš„å‹å¥½é˜…è¯»ä½“éªŒ</p>
        </div>

        <!-- é˜…è¯»æ§åˆ¶é¢æ¿ -->
        <div class="fixed top-4 right-4 z-50">
            <div class="reading-controls">
                <button class="reading-control-btn" id="playPauseBtn">
                    <i class="fas fa-play"></i>
                    <span>æ’­æ”¾</span>
                </button>
                
                <button class="reading-control-btn" id="stopBtn">
                    <i class="fas fa-stop"></i>
                </button>
                
                <div class="speed-control">
                    <i class="fas fa-tachometer-alt text-slate-400"></i>
                    <input type="range" class="speed-slider" id="speedSlider" 
                           min="0.5" max="2" step="0.1" value="1">
                    <span class="text-slate-400 text-sm" id="speedDisplay">1.0x</span>
                </div>
                
                <button class="reading-control-btn" id="resetBtn">
                    <i class="fas fa-redo"></i>
                </button>
            </div>
        </div>

        <!-- ç„¦ç‚¹æŒ‡ç¤ºå™¨ -->
        <div class="reading-focus-indicator" id="focusIndicator"></div>
        
        <!-- çŠ¶æ€æ˜¾ç¤º -->
        <div class="reading-status" id="readingStatus"></div>

        <!-- æµ‹è¯•å†…å®¹ -->
        <div class="bg-slate-800 bg-opacity-50 rounded-2xl p-8">
            <div class="markdown-content" id="testContent">
                <h1>äººå·¥æ™ºèƒ½çš„æœªæ¥å±•æœ›</h1>
                
                <p>äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰æ­£åœ¨æ·±åˆ»åœ°æ”¹å˜ç€æˆ‘ä»¬çš„ä¸–ç•Œã€‚ä»æ™ºèƒ½æ‰‹æœºä¸­çš„è¯­éŸ³åŠ©æ‰‹ï¼Œåˆ°è‡ªåŠ¨é©¾é©¶æ±½è½¦ï¼Œå†åˆ°åŒ»ç–—è¯Šæ–­ç³»ç»Ÿï¼ŒAIæŠ€æœ¯å·²ç»æ¸—é€åˆ°ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ã€‚</p>
                
                <h2>æŠ€æœ¯å‘å±•è¶‹åŠ¿</h2>
                
                <p>åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸï¼Œæ·±åº¦å­¦ä¹ æŠ€æœ¯æŒç»­çªç ´ã€‚ç¥ç»ç½‘ç»œæ¨¡å‹å˜å¾—è¶Šæ¥è¶Šå¤æ‚å’Œå¼ºå¤§ï¼Œèƒ½å¤Ÿå¤„ç†æ›´åŠ å¤æ‚çš„ä»»åŠ¡ã€‚åŒæ—¶ï¼Œè®¡ç®—èƒ½åŠ›çš„æå‡ä¹Ÿä¸ºAIçš„å‘å±•æä¾›äº†å¼ºæœ‰åŠ›çš„æ”¯æ’‘ã€‚</p>
                
                <p>è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰æŠ€æœ¯çš„è¿›æ­¥å°¤ä¸ºæ˜¾è‘—ã€‚å¤§å‹è¯­è¨€æ¨¡å‹å¦‚GPTç³»åˆ—ã€BERTç­‰ï¼Œåœ¨ç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€æ–¹é¢å±•ç°å‡ºäº†æƒŠäººçš„èƒ½åŠ›ã€‚è¿™äº›æ¨¡å‹ä¸ä»…èƒ½å¤Ÿè¿›è¡Œå¯¹è¯ï¼Œè¿˜èƒ½å®Œæˆç¿»è¯‘ã€æ‘˜è¦ã€åˆ›ä½œç­‰å¤æ‚ä»»åŠ¡ã€‚</p>
                
                <h2>åº”ç”¨å‰æ™¯</h2>
                
                <p>åœ¨æ•™è‚²é¢†åŸŸï¼ŒAIå¯ä»¥æä¾›ä¸ªæ€§åŒ–çš„å­¦ä¹ ä½“éªŒï¼Œæ ¹æ®æ¯ä¸ªå­¦ç”Ÿçš„å­¦ä¹ æƒ…å†µå’ŒèŠ‚å¥ï¼Œé‡èº«å®šåˆ¶æ•™å­¦å†…å®¹å’Œæ–¹æ³•ã€‚è¿™å°†æå¤§åœ°æé«˜æ•™è‚²æ•ˆç‡å’Œè´¨é‡ã€‚</p>
                
                <p>åœ¨åŒ»ç–—å¥åº·æ–¹é¢ï¼ŒAIè¾…åŠ©è¯Šæ–­ç³»ç»Ÿå¯ä»¥å¸®åŠ©åŒ»ç”Ÿæ›´å‡†ç¡®åœ°è¯†åˆ«ç–¾ç—…ï¼Œæé«˜è¯Šæ–­æ•ˆç‡ã€‚åŒæ—¶ï¼ŒAIè¿˜èƒ½å¤ŸååŠ©è¯ç‰©ç ”å‘ï¼Œç¼©çŸ­æ–°è¯ä¸Šå¸‚æ—¶é—´ã€‚</p>
                
                <p>åœ¨å·¥ä¸šåˆ¶é€ ä¸­ï¼Œæ™ºèƒ½æœºå™¨äººå’Œè‡ªåŠ¨åŒ–ç³»ç»Ÿå°†è¿›ä¸€æ­¥æé«˜ç”Ÿäº§æ•ˆç‡ï¼Œé™ä½æˆæœ¬ï¼ŒåŒæ—¶æå‡äº§å“è´¨é‡ã€‚</p>
                
                <h2>æŒ‘æˆ˜ä¸æ€è€ƒ</h2>
                
                <p>ç„¶è€Œï¼ŒAIçš„å‘å±•ä¹Ÿå¸¦æ¥äº†ä¸€äº›æŒ‘æˆ˜ã€‚éšç§ä¿æŠ¤ã€ç®—æ³•åè§ã€å°±ä¸šå½±å“ç­‰é—®é¢˜éœ€è¦æˆ‘ä»¬è®¤çœŸæ€è€ƒå’Œè§£å†³ã€‚å¦‚ä½•ç¡®ä¿AIæŠ€æœ¯çš„å‘å±•èƒ½å¤Ÿé€ ç¦å…¨äººç±»ï¼Œè€Œä¸æ˜¯åŠ å‰§ç¤¾ä¼šä¸å¹³ç­‰ï¼Œæ˜¯æˆ‘ä»¬é¢ä¸´çš„é‡è¦è¯¾é¢˜ã€‚</p>
                
                <p>æ­¤å¤–ï¼ŒAIç³»ç»Ÿçš„å¯è§£é‡Šæ€§å’Œé€æ˜åº¦ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦è®®é¢˜ã€‚æˆ‘ä»¬éœ€è¦èƒ½å¤Ÿç†è§£AIæ˜¯å¦‚ä½•åšå‡ºå†³ç­–çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨å…³é”®é¢†åŸŸå¦‚åŒ»ç–—ã€é‡‘èå’Œå¸æ³•ç­‰æ–¹é¢ã€‚</p>
                
                <h2>ç»“è¯­</h2>
                
                <p>äººå·¥æ™ºèƒ½çš„æœªæ¥å……æ»¡äº†æ— é™å¯èƒ½ã€‚é€šè¿‡åˆç†çš„è§„åˆ’å’Œè´Ÿè´£ä»»çš„å‘å±•ï¼ŒAIæŠ€æœ¯å°†ä¸ºäººç±»ç¤¾ä¼šå¸¦æ¥æ›´å¤šçš„ä¾¿åˆ©å’Œè¿›æ­¥ã€‚è®©æˆ‘ä»¬æºæ‰‹å…±åˆ›ä¸€ä¸ªæ›´åŠ æ™ºèƒ½ã€æ›´åŠ ç¾å¥½çš„æœªæ¥ã€‚</p>
            </div>
        </div>

        <div class="mt-8 text-center text-slate-400">
            <p>ğŸ’¡ ä½¿ç”¨è¯´æ˜ï¼šç‚¹å‡»"æ’­æ”¾"æŒ‰é’®å¼€å§‹é˜…è¯»è¾…åŠ©ï¼Œç©ºæ ¼é”®å¯æš‚åœ/ç»§ç»­ï¼Œè°ƒèŠ‚é€Ÿåº¦æ»‘å—æ”¹å˜é˜…è¯»é€Ÿåº¦</p>
        </div>
    </div>

    <script>
        // ç®€åŒ–ç‰ˆé˜…è¯»è¾…åŠ©åŠŸèƒ½
        class SimpleReadingAssistant {
            constructor() {
                this.isPlaying = false;
                this.currentIndex = 0;
                this.segments = [];
                this.timer = null;
                this.speed = 1.0;
                this.baseDelay = 800;
                this.currentHighlight = null;
                this.init();
            }

            init() {
                this.bindEvents();
                this.setupKeyboardShortcuts();
                this.initializeReading();
            }

            bindEvents() {
                document.getElementById('playPauseBtn').addEventListener('click', () => this.togglePlayPause());
                document.getElementById('stopBtn').addEventListener('click', () => this.stop());
                document.getElementById('resetBtn').addEventListener('click', () => this.reset());
                document.getElementById('speedSlider').addEventListener('input', (e) => {
                    this.speed = parseFloat(e.target.value);
                    this.updateSpeedDisplay();
                });
            }

            setupKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
                    
                    switch (e.code) {
                        case 'Space':
                            e.preventDefault();
                            this.togglePlayPause();
                            break;
                        case 'Escape':
                            e.preventDefault();
                            this.stop();
                            break;
                    }
                });
            }

            initializeReading() {
                const contentArea = document.getElementById('testContent');
                this.segments = this.segmentText(contentArea);
                this.showStatus(`å·²å‡†å¤‡ ${this.segments.length} ä¸ªé˜…è¯»ç‰‡æ®µ`);
            }

            segmentText(contentArea) {
                const segments = [];
                
                // é‡æ–°è®¾è®¡åˆ†æ®µç­–ç•¥ï¼šåŸºäºå…ƒç´ è€Œéæ–‡æœ¬èŠ‚ç‚¹
                const textElements = contentArea.querySelectorAll('p, h1, h2, h3, h4, h5, h6, li, div');
                
                textElements.forEach((element, elementIndex) => {
                    const text = element.textContent.trim();
                    if (text.length === 0) return;
                    
                    // æŒ‰å¥å­åˆ†å‰²æ–‡æœ¬
                    const sentences = this.splitIntoSentences(text);
                    
                    sentences.forEach((sentence, sentenceIndex) => {
                        if (sentence.trim().length > 0) {
                            segments.push({
                                text: sentence.trim(),
                                element: element,
                                elementIndex: elementIndex,
                                sentenceIndex: sentenceIndex,
                                originalText: text,
                                startOffset: text.indexOf(sentence.trim()),
                                endOffset: text.indexOf(sentence.trim()) + sentence.trim().length
                            });
                        }
                    });
                });

                return segments;
            }

            splitIntoSentences(text) {
                // æ”¹è¿›çš„åˆ†å¥ç®—æ³•
                let sentences = [];
                
                // å…ˆæŒ‰ä¸»è¦æ ‡ç‚¹åˆ†å‰²
                const parts = text.split(/([ã€‚ï¼ï¼Ÿï¼›.!?;])/);
                let current = '';
                
                for (let i = 0; i < parts.length; i += 2) {
                    const textPart = parts[i] || '';
                    const punctuation = parts[i + 1] || '';
                    
                    current += textPart + punctuation;
                    
                    if (punctuation && /[ã€‚ï¼ï¼Ÿï¼›.!?;]/.test(punctuation)) {
                        if (current.trim().length > 0) {
                            sentences.push(current.trim());
                            current = '';
                        }
                    }
                }
                
                // æ·»åŠ å‰©ä½™éƒ¨åˆ†
                if (current.trim().length > 0) {
                    sentences.push(current.trim());
                }
                
                // å¦‚æœå¥å­å¤ªé•¿ï¼ŒæŒ‰é€—å·è¿›ä¸€æ­¥åˆ†å‰²
                const finalSentences = [];
                sentences.forEach(sentence => {
                    if (sentence.length > 50 && (sentence.includes(',') || sentence.includes('ï¼Œ'))) {
                        const subParts = sentence.split(/([,ï¼Œ])/);
                        let subCurrent = '';
                        
                        for (let i = 0; i < subParts.length; i += 2) {
                            const textPart = subParts[i] || '';
                            const comma = subParts[i + 1] || '';
                            
                            subCurrent += textPart + comma;
                            
                            if (comma && subCurrent.trim().length > 15) {
                                finalSentences.push(subCurrent.trim());
                                subCurrent = '';
                            }
                        }
                        
                        if (subCurrent.trim().length > 0) {
                            finalSentences.push(subCurrent.trim());
                        }
                    } else {
                        finalSentences.push(sentence);
                    }
                });
                
                return finalSentences.filter(s => s.trim().length > 0);
            }

            togglePlayPause() {
                if (this.isPlaying) {
                    this.pause();
                } else {
                    this.play();
                }
            }

            play() {
                this.isPlaying = true;
                this.updatePlayButton();
                this.startReading();
                this.showStatus('æ­£åœ¨é˜…è¯»...');
            }

            pause() {
                this.isPlaying = false;
                this.updatePlayButton();
                this.clearTimer();
                this.showStatus('é˜…è¯»å·²æš‚åœï¼ŒæŒ‰ç©ºæ ¼ç»§ç»­');
            }

            stop() {
                this.isPlaying = false;
                this.currentIndex = 0;
                this.updatePlayButton();
                this.clearTimer();
                this.clearHighlight();
                this.showStatus('é˜…è¯»å·²åœæ­¢');
            }

            reset() {
                this.stop();
                this.showStatus('å·²é‡ç½®åˆ°å¼€å¤´');
            }

            startReading() {
                if (!this.isPlaying || this.currentIndex >= this.segments.length) {
                    this.complete();
                    return;
                }

                this.highlightCurrentSegment();
                this.scheduleNext();
            }

            scheduleNext() {
                this.clearTimer();
                if (!this.isPlaying) return;

                const currentSegment = this.segments[this.currentIndex];
                const delay = this.calculateDelay(currentSegment.text);
                
                this.timer = setTimeout(() => {
                    this.currentIndex++;
                    this.startReading();
                }, delay);
            }

            calculateDelay(text) {
                const baseLength = text.length;
                const hasComma = text.includes(',') || text.includes('ï¼Œ');
                
                let multiplier = 1;
                
                const chineseChars = (text.match(/[\u4e00-\u9fff]/g) || []).length;
                if (chineseChars > baseLength * 0.7) {
                    multiplier *= 1.2;
                }
                
                if (hasComma) multiplier *= 1.3;
                
                const lengthFactor = Math.min(2, Math.max(0.5, baseLength / 15));
                
                return (this.baseDelay * lengthFactor * multiplier) / this.speed;
            }

            highlightCurrentSegment() {
                this.clearHighlight();
                
                if (this.currentIndex >= this.segments.length) return;
                
                const segment = this.segments[this.currentIndex];
                const element = segment.element;
                
                // æ–°çš„é«˜äº®ç­–ç•¥ï¼šä½¿ç”¨CSSç±»è€Œä¸æ˜¯æ›¿æ¢DOM
                this.highlightTextInElement(element, segment.text);
                
                // æ»šåŠ¨åˆ°å½“å‰ä½ç½®
                this.scrollToElement(element);
                
                // æ›´æ–°ç„¦ç‚¹æŒ‡ç¤ºå™¨
                this.updateFocusIndicator(element);
            }

            highlightTextInElement(element, targetText) {
                // æ¸…é™¤ä¹‹å‰çš„é«˜äº®
                this.removeHighlightFromElement(element);
                
                // æŸ¥æ‰¾å¹¶é«˜äº®æ–‡æœ¬
                const walker = document.createTreeWalker(
                    element,
                    NodeFilter.SHOW_TEXT,
                    null,
                    false
                );
                
                let textNode;
                while (textNode = walker.nextNode()) {
                    const text = textNode.textContent;
                    const index = text.indexOf(targetText);
                    
                    if (index !== -1) {
                        // æ‰¾åˆ°ç›®æ ‡æ–‡æœ¬ï¼Œåˆ›å»ºé«˜äº®
                        this.createHighlightInTextNode(textNode, index, targetText.length);
                        break;
                    }
                }
            }

            createHighlightInTextNode(textNode, startIndex, length) {
                const text = textNode.textContent;
                const beforeText = text.substring(0, startIndex);
                const highlightText = text.substring(startIndex, startIndex + length);
                const afterText = text.substring(startIndex + length);
                
                // åˆ›å»ºæ–‡æ¡£ç‰‡æ®µ
                const fragment = document.createDocumentFragment();
                
                // æ·»åŠ å‰é¢çš„æ–‡æœ¬
                if (beforeText) {
                    fragment.appendChild(document.createTextNode(beforeText));
                }
                
                // åˆ›å»ºé«˜äº®span
                const highlightSpan = document.createElement('span');
                highlightSpan.className = 'reading-highlight';
                highlightSpan.textContent = highlightText;
                highlightSpan.setAttribute('data-reading-highlight', 'true');
                fragment.appendChild(highlightSpan);
                
                // æ·»åŠ åé¢çš„æ–‡æœ¬
                if (afterText) {
                    fragment.appendChild(document.createTextNode(afterText));
                }
                
                // æ›¿æ¢åŸæ–‡æœ¬èŠ‚ç‚¹
                textNode.parentNode.replaceChild(fragment, textNode);
                this.currentHighlight = highlightSpan;
            }

            removeHighlightFromElement(element) {
                // ç§»é™¤å…ƒç´ å†…æ‰€æœ‰çš„é˜…è¯»é«˜äº®
                const highlights = element.querySelectorAll('[data-reading-highlight="true"]');
                highlights.forEach(highlight => {
                    const text = highlight.textContent;
                    highlight.parentNode.replaceChild(document.createTextNode(text), highlight);
                });
                
                // è§„èŒƒåŒ–æ–‡æœ¬èŠ‚ç‚¹
                element.normalize();
            }

            clearHighlight() {
                if (this.currentHighlight) {
                    const element = this.currentHighlight.closest('p, h1, h2, h3, h4, h5, h6, li, div');
                    if (element) {
                        this.removeHighlightFromElement(element);
                    }
                    this.currentHighlight = null;
                }
            }

            scrollToElement(element) {
                const rect = element.getBoundingClientRect();
                const windowHeight = window.innerHeight;
                
                if (rect.top < windowHeight * 0.3 || rect.bottom > windowHeight * 0.7) {
                    element.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center',
                        inline: 'nearest'
                    });
                }
            }

            updateFocusIndicator(element) {
                const indicator = document.getElementById('focusIndicator');
                if (!indicator || !element) return;
                
                const rect = element.getBoundingClientRect();
                const top = rect.top + window.scrollY - 10;
                
                indicator.style.top = `${top}px`;
                indicator.style.display = 'block';
            }

            updatePlayButton() {
                const btn = document.getElementById('playPauseBtn');
                const icon = btn.querySelector('i');
                const text = btn.querySelector('span');
                
                if (this.isPlaying) {
                    icon.className = 'fas fa-pause';
                    text.textContent = 'æš‚åœ';
                    btn.classList.add('active');
                } else {
                    icon.className = 'fas fa-play';
                    text.textContent = 'æ’­æ”¾';
                    btn.classList.remove('active');
                }
            }

            updateSpeedDisplay() {
                document.getElementById('speedDisplay').textContent = `${this.speed.toFixed(1)}x`;
            }

            complete() {
                this.isPlaying = false;
                this.updatePlayButton();
                this.clearHighlight();
                this.showStatus('é˜…è¯»å®Œæˆï¼æŒ‰é‡ç½®é”®é‡æ–°å¼€å§‹');
            }

            clearTimer() {
                if (this.timer) {
                    clearTimeout(this.timer);
                    this.timer = null;
                }
            }

            showStatus(message) {
                const status = document.getElementById('readingStatus');
                status.textContent = message;
                status.style.display = 'block';
                
                setTimeout(() => {
                    if (status.textContent === message) {
                        status.style.display = 'none';
                    }
                }, 3000);
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            new SimpleReadingAssistant();
        });
    </script>
</body>
</html> 